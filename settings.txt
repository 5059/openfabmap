##### FUNCTION #####
# 1 - View Features on a Video
# 2 - Build Codebook
# 3 - View Words on a Video
# 4 - Build ChowLiuTree
# 5 - Full PDF Calculation. Each frame added (FAB_MAP 1.0 as in Cummins et. al. without the Pior on position)
# 6 - FBO PDF Calculation. Frames added when a 'new location' is 
	- largest probability (as in Glover et. al.)
# 7 - Visualise FABMAP results from results file

FUNCTION = 1

##### GLOBAL I/O ######

VIDEO = E:\SLAM Datasets\Datasets\NewCollege\PanoStitchOutput_LisaNewCollegeNov3\panostitch.avi
CODEBOOK = C:\pioneer\fabmaptest\UAV_book_2000.save
CLTREE = C:\pioneer\fabmaptest\UAV_tree_2000.save
FM_SAVE = C:\pioneer\fabmaptest\UAV_results\full_kyfrms_2000_2.save

##### VIEWING FEATURES AND WORDS #####

# 0 -> a key must be pressed to continue to the next frame
VW_FPS = 30 

##### CODEBOOK #####

#where to save the descriptors used to create a codebook
CB_DATAFILE = C:\pioneer\fabmaptest\UAB_bookdata.save

# 1 - Modified Sequential Cluster
# 2 - Kmeans
CB_METHOD = 2

#MODIFIED SEQUENTIAL CLUSTER options
#setting MSC_CLUSTERS > 0 will attempt to find a clustersize that will give
# the amount of clusters (words) desired through trial and error. To turn
#this off and simply use the MSC_CLUSTERSIZE set MSC_CLUSTERS = 0
MSC_CLUSTERS = 0
MSC_CLUSTERSIZE = 0.5

#K-MEANS options
KM_NCENTRES = 2000
KM_EPSILON = 0.05
KM_ATTEMPTS = 5

##### CHOW-LIU TREE #####

#a large amount of data is required to store the mutual information used to
#create the minimum spanning tree. Increasing the threshold means that less
#data is stored however COULD reduce the tree performance or cause it not to
#finish building. e.g. 8000 word codebook requires 1.2 Gb RAM.
#A threshold of 0 is zero risk to performance but takes longer and may fail
#due to memory requirements
CL_INFOTHRESH = 0.005;

##### FAB-MAP #####

#showing the input video can slow things down
FM_SHOWMOVIE = true

#DETECTOR model  - should be experimentally determined based on 
#					repeatability of the detector used 
FM_PZGE = 0.8		#decreasing this makes algorithm match more often
FM_PZGNE = 0.001	#increasing this makes appearnce match more often

#PRIOR/MOTION MODEL options

# prior probabilty of the next location being close to the previous 
# current location
FM_PNEAR = 0.95
# the neighbourhood size of the 'closeness' of PNEAR
FM_NFR = 4
# the prior probabilty of the location being a new location
FM_PNEW = 0.2

#FAST-BAILOUT options

# we caclulate the gap between hyp A and hyp B and set the bailout limit
# such that the probability that B will eventually be better than A is
FM_PS_D = 1e-8

# we have a limit below the best hyp at which we still consider the
# probabilty of other hyps valid. The likelihood of bailed-out hyps will 
# also be set to this value
FM_LOFBOH = 1e-8

# we estimate the bail-out gap using bisection method.
# BISECTION_START specifies the maximal value the gap can be
# BISECTION_ITERATIONS specifies the accuracy (START/2^ITERATIONS)
FM_BISTART = 512
FM_BIITS = 9

##### FABMAP VISUALISATION #####

#size to display location thumbnails
VW_TNSIZEWIDTH = 200
VW_TNSIZEHEIGHT = 100

##### FEATURE EXTRACTION #####

#resize the image before extraction. Allows speed/performance trade-off
#detector options should be tailored for the image size
DETECT_RESIZE = false
DETECT_RESIZE_WIDTH = 640
DETECT_RESIZE_HEIGHT = 480

#DETECTOR_MODE
# 1 - SURF
# 2 - STAR
# 3 - MSER
DETECT_MODE = 2

#using openSURF
OS_UPRIGHT = true
OS_OCTAVES = 5
OS_INTERVALS = 4 
OS_INIT = 6
OS_THRESHOLD = 0.0008

#star interest point (surf descriptor)
STAR_UPRIGHT = true
STAR_MAXSIZE = 32
STAR_THRESHOLD = 6
STAR_LINETHRESHOLD = 18
STAR_LINEBIN = 18
STAR_SUPPRESSIONAREA = 48

#mser interest point (surf descriptor)
MSER_UPRIGHT = true
MSER_ERATIO = 0.002 #1 is a circle 0 is a line
MSER_DELTA = 4
MSER_MINAREA = 100
MSER_MAXAREA = 1200
MSER_MAXVAR = 0.7
MSER_MINDIV = 0.99


